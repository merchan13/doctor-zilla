<%= render 'shared/errors', obj: @complete_prescription %>
<div class="col-md-9 new-panel main-panel">

  <h3 align="center"><strong>Nuevo Récipe</strong></h3>

  <div class="col-md-12"><hr></div>

  <%= form_for(@prescription, :html => {class: 'form-horizontal', role: 'form'}) do |f| %>

    <input type="hidden" name="record" value="<%= @record.id %>">

    <div class="clone-test" id="clone-test">
        <!-- MEDICAMENTO -->
        <div class="form-group col-md-12">
          <h4><i>Medicamento</i></h4>
          <div class="col-md-8">
            <select class="form-control form-control medicine_form" name="prescription[][medicine_id]" id="">
              <option value="">-Seleccione una opción-</option>
              <% Medicine.all.each do |m| %>
                <option value="<%= m.id %>"><%= "#{m.generic_name} (#{m.comercial_name}) - Vía #{m.dose_way}, #{m.dose_presentation} de #{m.dose_quantity}#{m.dose_unit}" %></option>
              <% end %>
            </select>
          </div>
          <div class="col-md-12">
            <a href="#" data-toggle="modal" data-target="#new-medicine-modal">Agrear nuevo medicamento</a>
          </div>
        </div>

      <!-- Administración -->
      <div class="form-group col-md-5">
        <h4><i>Administración</i></h4>
        <div class="col-md-4">
          <small>Cantidad</small>
          <input type="number" name="prescription[][interval_quantity]" value="" class="form-control">
        </div>
        <div class="col-md-4">
          <small>Tiempo</small>
          <input type="number" name="prescription[][interval_time]" value="" class="form-control">
        </div>
        <div class="col-md-4">
          <small>Unidades</small>
          <select class="form-control" name="prescription[][interval_unit]" id="">
            <option value="">-Seleccione una opción-</option>
            <option value="Horas">Horas</option>
            <option value="Veces">Veces</option>
          </select>
        </div>
      </div>

      <!-- DURACION -->
      <div class="form-group col-md-4">
        <h4><i>Duración</i></h4>
        <div class="col-md-5">
          <small>Cantidad</small>
          <input type="number" name="prescription[][duration_quantity]" value="" class="form-control">
        </div>
        <div class="col-md-6">
          <small>Días/Semanas/Meses</small>
          <select class="form-control" name="prescription[][duration_unit]" id="">
            <option value="">-Seleccione una opción-</option>
            <option value="Días">Días</option>
            <option value="Semanas">Semanas</option>
            <option value="Meses">Meses</option>
          </select>
        </div>
      </div>

      <!-- OBSERVACION -->
      <div class="form-group col-md-4">
        <h4><i>Observación</i></h4>
        <br>
        <textarea name="prescription[][note]" rows="4" class="form-control"></textarea>
      </div>
    </div>

    <div class='form-group center'>
      <div class='col-md-4 col-md-offset-4 '>
        <button type="button" name="button" class="btn btn-info add_medicine_button">Agregar medicamento<br>al récipe</button>
      </div>
    </div>

    <div class="col-md-12"><hr></div>

    <div class='form-group center'>
      <div class='col-md-4 col-md-offset-4'>
        <%= f.submit class: 'btn btn-primary btn-lg' %>
      </div>
    </div>
  <% end %>
</div>

<%= render partial: 'medical_records/side_menu', locals: { record: @record } %>

<!-- MEDICINA -->
<%= render 'modals' %>
